{
  "workflow": {
    "22": {
      "inputs": {
        "model": "Wan2_2-Fun-Control-A14B-HIGH_fp8_e5m2_scaled_KJ_fixed.safetensors",
        "base_precision": "fp16",
        "quantization": "fp8_e5m2_scaled",
        "load_device": "offload_device",
        "attention_mode": "sageattn",
        "compile_args": [
          "35",
          0
        ]
      },
      "class_type": "WanVideoModelLoader",
      "_meta": {
        "title": "WanVideo Model Loader"
      }
    },
    "27": {
      "inputs": {
        "steps": [
          "130",
          0
        ],
        "cfg": 1,
        "shift": 5,
        "seed": 43,
        "force_offload": true,
        "scheduler": [
          "133",
          0
        ],
        "riflex_freq_index": 0,
        "denoise_strength": 1,
        "batched_cfg": "",
        "rope_function": "comfy",
        "start_step": 0,
        "end_step": [
          "127",
          0
        ],
        "add_noise_to_samples": false,
        "model": [
          "97",
          0
        ],
        "image_embeds": [
          "145",
          0
        ],
        "text_embeds": [
          "126",
          0
        ]
      },
      "class_type": "WanVideoSampler",
      "_meta": {
        "title": "WanVideo Sampler"
      }
    },
    "28": {
      "inputs": {
        "enable_vae_tiling": false,
        "tile_x": 272,
        "tile_y": 272,
        "tile_stride_x": 144,
        "tile_stride_y": 128,
        "normalization": "default",
        "vae": [
          "38",
          0
        ],
        "samples": [
          "100",
          0
        ]
      },
      "class_type": "WanVideoDecode",
      "_meta": {
        "title": "WanVideo Decode"
      }
    },
    "30": {
      "inputs": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "WanVideoWrapper_22FunControl",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": true,
        "images": [
          "28",
          0
        ]
      },
      "class_type": "VHS_VideoCombine",
      "_meta": {
        "title": "Video Combine ğŸ¥ğŸ…¥ğŸ…—ğŸ…¢"
      }
    },
    "35": {
      "inputs": {
        "backend": "inductor",
        "fullgraph": false,
        "mode": "default",
        "dynamic": false,
        "dynamo_cache_size_limit": 64,
        "compile_transformer_blocks_only": true,
        "dynamo_recompile_limit": 128
      },
      "class_type": "WanVideoTorchCompileSettings",
      "_meta": {
        "title": "WanVideo Torch Compile Settings"
      }
    },
    "38": {
      "inputs": {
        "model_name": "wan_2.1_vae.safetensors",
        "precision": "bf16"
      },
      "class_type": "WanVideoVAELoader",
      "_meta": {
        "title": "WanVideo VAE Loader"
      }
    },
    "39": {
      "inputs": {
        "blocks_to_swap": 10,
        "offload_img_emb": false,
        "offload_txt_emb": false,
        "use_non_blocking": true,
        "vace_blocks_to_swap": 0,
        "prefetch_blocks": 0,
        "block_swap_debug": false
      },
      "class_type": "WanVideoBlockSwap",
      "_meta": {
        "title": "WanVideo Block Swap"
      }
    },
    "58": {
      "inputs": {
        "image": "1727072549b31c8edd7cb009afffb3665cd331d887.jpg"
      },
      "class_type": "LoadImage",
      "_meta": {
        "title": "åŠ è½½å›¾åƒ"
      }
    },
    "63": {
      "inputs": {
        "width": [
          "76",
          1
        ],
        "height": [
          "76",
          2
        ],
        "num_frames": [
          "76",
          3
        ],
        "noise_aug_strength": 0,
        "start_latent_strength": 1,
        "end_latent_strength": 1,
        "force_offload": true,
        "fun_or_fl2v_model": true,
        "tiled_vae": false,
        "vae": [
          "38",
          0
        ],
        "start_image": [
          "109",
          0
        ]
      },
      "class_type": "WanVideoImageToVideoEncode",
      "_meta": {
        "title": "WanVideo ImageToVideo Encode"
      }
    },
    "76": {
      "inputs": {
        "image": [
          "156",
          0
        ]
      },
      "class_type": "GetImageSizeAndCount",
      "_meta": {
        "title": "Get Image Size & Count"
      }
    },
    "77": {
      "inputs": {
        "enable_vae_tiling": false,
        "tile_x": 272,
        "tile_y": 272,
        "tile_stride_x": 144,
        "tile_stride_y": 128,
        "noise_aug_strength": 0,
        "latent_strength": 1,
        "vae": [
          "38",
          0
        ],
        "image": [
          "76",
          0
        ]
      },
      "class_type": "WanVideoEncode",
      "_meta": {
        "title": "WanVideo Encode"
      }
    },
    "82": {
      "inputs": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "control",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": false,
        "images": [
          "156",
          0
        ]
      },
      "class_type": "VHS_VideoCombine",
      "_meta": {
        "title": "Video Combine ğŸ¥ğŸ…¥ğŸ…—ğŸ…¢"
      }
    },
    "96": {
      "inputs": {
        "width": [
          "109",
          1
        ],
        "height": [
          "109",
          2
        ],
        "upscale_method": "lanczos",
        "keep_proportion": "resize",
        "pad_color": "0, 0, 0",
        "crop_position": "center",
        "divisible_by": 16,
        "device": "cpu",
        "image": [
          "119",
          0
        ]
      },
      "class_type": "ImageResizeKJv2",
      "_meta": {
        "title": "Resize Image v2"
      }
    },
    "97": {
      "inputs": {
        "model": [
          "98",
          0
        ],
        "lora": [
          "99",
          0
        ]
      },
      "class_type": "WanVideoSetLoRAs",
      "_meta": {
        "title": "WanVideo Set LoRAs"
      }
    },
    "98": {
      "inputs": {
        "model": [
          "22",
          0
        ],
        "block_swap_args": [
          "39",
          0
        ]
      },
      "class_type": "WanVideoSetBlockSwap",
      "_meta": {
        "title": "WanVideo Set BlockSwap"
      }
    },
    "99": {
      "inputs": {
        "lora_0": "WanVideo\\Wan2.2-Lightning_T2V-v1.1-A14B-4steps-lora_HIGH_fp16.safetensors",
        "strength_0": 1,
        "lora_1": "none",
        "strength_1": 1,
        "lora_2": "none",
        "strength_2": 1,
        "lora_3": "none",
        "strength_3": 1,
        "lora_4": "none",
        "strength_4": 1,
        "low_mem_load": false,
        "merge_loras": false
      },
      "class_type": "WanVideoLoraSelectMulti",
      "_meta": {
        "title": "WanVideo Lora Select Multi"
      }
    },
    "100": {
      "inputs": {
        "steps": [
          "130",
          0
        ],
        "cfg": 1,
        "shift": 5,
        "seed": 42,
        "force_offload": true,
        "scheduler": [
          "133",
          0
        ],
        "riflex_freq_index": 0,
        "denoise_strength": 1,
        "batched_cfg": "",
        "rope_function": "comfy",
        "start_step": [
          "127",
          0
        ],
        "end_step": -1,
        "add_noise_to_samples": false,
        "model": [
          "105",
          0
        ],
        "image_embeds": [
          "145",
          0
        ],
        "text_embeds": [
          "126",
          0
        ],
        "samples": [
          "27",
          0
        ]
      },
      "class_type": "WanVideoSampler",
      "_meta": {
        "title": "WanVideo Sampler"
      }
    },
    "103": {
      "inputs": {
        "model": "Wan2_2-Fun-Control-A14B-LOW_fp8_e5m2_scaled_KJ_fixed.safetensors",
        "base_precision": "fp16",
        "quantization": "fp8_e5m2_scaled",
        "load_device": "offload_device",
        "attention_mode": "sageattn",
        "compile_args": [
          "35",
          0
        ]
      },
      "class_type": "WanVideoModelLoader",
      "_meta": {
        "title": "WanVideo Model Loader"
      }
    },
    "104": {
      "inputs": {
        "model": [
          "103",
          0
        ],
        "block_swap_args": [
          "39",
          0
        ]
      },
      "class_type": "WanVideoSetBlockSwap",
      "_meta": {
        "title": "WanVideo Set BlockSwap"
      }
    },
    "105": {
      "inputs": {
        "model": [
          "104",
          0
        ],
        "lora": [
          "106",
          0
        ]
      },
      "class_type": "WanVideoSetLoRAs",
      "_meta": {
        "title": "WanVideo Set LoRAs"
      }
    },
    "106": {
      "inputs": {
        "lora_0": "WanVideo\\lightx2v_T2V_14B_cfg_step_distill_v2_lora_rank64_bf16.safetensors",
        "strength_0": 1.5,
        "lora_1": "none",
        "strength_1": 1,
        "lora_2": "none",
        "strength_2": 1,
        "lora_3": "none",
        "strength_3": 1,
        "lora_4": "none",
        "strength_4": 1,
        "low_mem_load": false,
        "merge_loras": false
      },
      "class_type": "WanVideoLoraSelectMulti",
      "_meta": {
        "title": "WanVideo Lora Select Multi"
      }
    },
    "109": {
      "inputs": {
        "width": [
          "153",
          0
        ],
        "height": [
          "154",
          0
        ],
        "upscale_method": "lanczos",
        "keep_proportion": "crop",
        "pad_color": "0,0,0",
        "crop_position": "center",
        "divisible_by": 16,
        "device": "cpu",
        "image": [
          "58",
          0
        ]
      },
      "class_type": "ImageResizeKJv2",
      "_meta": {
        "title": "Resize Image v2"
      }
    },
    "119": {
      "inputs": {
        "video": "5af10b3f62e2df59aaeb47a04015a015a9ebfa8bbca6b5f8776a5a8db6d0d03d.mp4",
        "force_rate": 0,
        "custom_width": 0,
        "custom_height": 0,
        "frame_load_cap": 81,
        "skip_first_frames": 0,
        "select_every_nth": 2,
        "format": "AnimateDiff"
      },
      "class_type": "VHS_LoadVideo",
      "_meta": {
        "title": "Load Video (Upload) ğŸ¥ğŸ…¥ğŸ…—ğŸ…¢"
      }
    },
    "122": {
      "inputs": {
        "enable_vae_tiling": false,
        "tile_x": 272,
        "tile_y": 272,
        "tile_stride_x": 144,
        "tile_stride_y": 128,
        "noise_aug_strength": 0,
        "latent_strength": 1,
        "vae": [
          "38",
          0
        ],
        "image": [
          "109",
          0
        ]
      },
      "class_type": "WanVideoEncode",
      "_meta": {
        "title": "WanVideo Encode"
      }
    },
    "126": {
      "inputs": {
        "model_name": "umt5-xxl-enc-bf16.safetensors",
        "precision": "bf16",
        "positive_prompt": "woman raises",
        "negative_prompt": "è‰²è°ƒè‰³ä¸½ï¼Œè¿‡æ›ï¼Œé™æ€ï¼Œç»†èŠ‚æ¨¡ç³Šä¸æ¸…ï¼Œå­—å¹•ï¼Œé£æ ¼ï¼Œä½œå“ï¼Œç”»ä½œï¼Œç”»é¢ï¼Œé™æ­¢ï¼Œæ•´ä½“å‘ç°ï¼Œæœ€å·®è´¨é‡ï¼Œä½è´¨é‡ï¼ŒJPEGå‹ç¼©æ®‹ç•™ï¼Œä¸‘é™‹çš„ï¼Œæ®‹ç¼ºçš„ï¼Œå¤šä½™çš„æ‰‹æŒ‡ï¼Œç”»å¾—ä¸å¥½çš„æ‰‹éƒ¨ï¼Œç”»å¾—ä¸å¥½çš„è„¸éƒ¨ï¼Œç•¸å½¢çš„ï¼Œæ¯å®¹çš„ï¼Œå½¢æ€ç•¸å½¢çš„è‚¢ä½“ï¼Œæ‰‹æŒ‡èåˆï¼Œé™æ­¢ä¸åŠ¨çš„ç”»é¢ï¼Œæ‚ä¹±çš„èƒŒæ™¯ï¼Œä¸‰æ¡è…¿ï¼ŒèƒŒæ™¯äººå¾ˆå¤šï¼Œå€’ç€èµ°",
        "quantization": "disabled",
        "use_disk_cache": true,
        "device": "gpu",
        "speak_and_recognation": {
          "__value__": [
            false,
            true
          ]
        }
      },
      "class_type": "WanVideoTextEncodeCached",
      "_meta": {
        "title": "WanVideo TextEncode Cached"
      }
    },
    "127": {
      "inputs": {
        "value": 2
      },
      "class_type": "INTConstant",
      "_meta": {
        "title": "split_step"
      }
    },
    "130": {
      "inputs": {
        "value": 6
      },
      "class_type": "INTConstant",
      "_meta": {
        "title": "total_steps"
      }
    },
    "133": {
      "inputs": {
        "scheduler": "dpm++_sde"
      },
      "class_type": "WanVideoScheduler",
      "_meta": {
        "title": "WanVideoScheduler"
      }
    },
    "145": {
      "inputs": {
        "start_percent": 0,
        "end_percent": 1,
        "embeds": [
          "63",
          0
        ],
        "latents": [
          "77",
          0
        ]
      },
      "class_type": "WanVideoAddControlEmbeds",
      "_meta": {
        "title": "WanVideo Add Control Embeds"
      }
    },
    "153": {
      "inputs": {
        "value": 448
      },
      "class_type": "INTConstant",
      "_meta": {
        "title": "Width"
      }
    },
    "154": {
      "inputs": {
        "value": 768
      },
      "class_type": "INTConstant",
      "_meta": {
        "title": "Height"
      }
    },
    "156": {
      "inputs": {
        "detect_hand": "enable",
        "detect_body": "enable",
        "detect_face": "disable",
        "resolution": [
          "96",
          1
        ],
        "scale_stick_for_xinsr_cn": "disable",
        "image": [
          "96",
          0
        ]
      },
      "class_type": "OpenposePreprocessor",
      "_meta": {
        "title": "OpenPose Pose"
      }
    }
  }
}